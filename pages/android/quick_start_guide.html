<!doctype html>
<html lang="en">
  <head>
    <link href="../../images/favicon.ico" rel="icon" type="image/ico" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Situm Developers | Android SDK | Quick start guide</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
<meta charset="utf-8">
<meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
<meta name="author" content="SITUM TECHNOLOGIES S.L."/>
<meta name="description" content="In this tutorial, we will guide you step by step to set up your first Android application using Situm SDK."/>

<meta property="og:title" content="Situm Developers | Android SDK | Quick start guide" />
<meta property="og:url" content="https://developers.situm.es/" />
<meta property="og:image" content="https://developers.situm.es/images/facebook_img.jpg" />
<meta property="og:description" content="In this tutorial, we will guide you step by step to set up your first Android application using Situm SDK." />
<meta property="og:site_name" content="Situm Developers" />

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@situm_es">
<meta name="twitter:title" content="Situm Developers | Android SDK | Quick start guide">
<meta name="twitter:description" content="In this tutorial, we will guide you step by step to set up your first Android application using Situm SDK.">
<meta name="twitter:image" content="https://developers.situm.es/images/facebook_img.jpg">


    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link href="../../stylesheets/highlighting.css" rel="stylesheet" />
    <link href="../../stylesheets/site.css" rel="stylesheet" />
    <script src="../../javascripts/all.js"></script>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-45063973-7', 'auto');
    ga('send', 'pageview');

</script>

  </head>

  <body class="pages pages_android pages_android_quick_start_guide">
    <header class="header-wrapper--pc">
  <div class="header-navigation">
    <div class="header-navigation__nav-logo">
<a href="../../">        <img src="../../images/common/situm-white-logo.png" alt="Situm white logo" />
        <span>Situm Developers</span>
        <div class="clear"></div>
</a>    </div>
    <div class="header-navigation__nav-links">
        <a href="../../" class="navigation-link ">Home</a>
        <a href="./" class="navigation-link ">Android SDK</a>
        <a href="../ios/" class="navigation-link ">IOS SDK</a>
        <a href="../rest/" class="navigation-link ">Situm REST API</a>
        <a href="../terminology/" class="navigation-link ">Terminology</a>
        <a href="../support/" class="navigation-link ">Support</a>
    </div>
    <div class="clear"></div>
  </div>
</header>

<header class="header-wrapper--mobile">
  <div class="header-navigation">

    <label class="navbar-label" for="open-navbar">
      <div class="header-navigation__nav-toggle">
        <div class="icon-wrapper--mobile">
          <span class="nav-hamburger">
  <span class="nav-hamburger__line"></span>
  <span class="nav-hamburger__line"></span>
  <span class="nav-hamburger__line"></span>
</span>

        </div>
      </div>
    </label>

    <div class="header-navigation__nav-logo">
<a href="../../">        <img src="../../images/common/situm-white-logo.png" alt="Situm white logo" />
        <span>Situm Developers</span>
        <div class="clear"></div>
</a>    </div>
    <div class="clear"></div>
  </div>
</header>

    <div class="android-sdk-wrapper">
      <div class="sidebar__header">
  <div class="hamburger-wrapper">
    <label for="open-sidebar">
      <span class="nav-hamburger">
  <span class="nav-hamburger__line"></span>
  <span class="nav-hamburger__line"></span>
  <span class="nav-hamburger__line"></span>
</span>

    </label>
  </div>
  <div class="sidebar__header--title">
    <div class="icon"></div>
    <span>
      Developers
    </span>
  </div>
</div>
<input type="checkbox" id="open-sidebar" class="check-sidebar">


        <div id="wrapper" class="_wrapper">
          <div id="sidebar-wrapper" class="_sidebar-wrapper">
  <ul class="sidebar-nav">
    <li>
        <a href="index.html" class="sidebar-nav__section ">Overview</a>
        <a href="quick_start_guide.html" class="sidebar-nav__section active">Quick start guide</a>
          <div class="sidebar-nav__section-list">
              <a href="" class="sidebar-nav__section-part">Introduction</a>
              <a href="#guide__configure-sdk" class="sidebar-nav__section-part">Configure our SDK in your project</a>
              <a href="#guide__instance-situmData" class="sidebar-nav__section-part">Get an instance of SitumDataManager</a>
              <a href="#guide__download-your-buildings" class="sidebar-nav__section-part">Download your buildings</a>
              <a href="#guide__download-building-data" class="sidebar-nav__section-part">Download building data</a>
              <a href="#guide__activate-the-positioning" class="sidebar-nav__section-part">Activate the positioning</a>
              <a href="#guide__android-60" class="sidebar-nav__section-part">Android 6.0 compilation</a>
          </div>
        <a href="api_documentation.html" class="sidebar-nav__section ">Api documentation</a>
        <a href="code_examples.html" class="sidebar-nav__section ">Code examples</a>
        <a href="changelog.html" class="sidebar-nav__section ">Changelog</a>
    </li>
  </ul>
</div>


          <div id="page-content-wrapper" class="_page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="documentation-content-wrapper">

                      
<div class="guide">
  <h1>Quick start guide</h1>

  <div id="guide__introduction" class="guide__introduction">
    <h3>Introduction</h3>

<p>In this tutorial, we will guide you step by step to set up your first Android application
using Situm SDK. Before you start to write code, we recommend you to set up an account in our
Dashboard (<a href="https://dashboard.situm.es">https://dashboard.situm.es</a>), retrieve your APIKEY
and configure your first building.</p>

<ol>
<li>Go to the <a href="http://dashboard.situm.es/accounts/register">sign in form</a> and enter your username and password to sign in.</li>
<li>2. Go to the <a href="http://dashboard.situm.es/accounts/users/apps">apps section</a> and click on &ldquo;Are you a developer?&rdquo; to generate your APIKEY.</li>
<li>Go to the <a href="http://dashboard.situm.es/buildings">buildings section</a> and create your first building.</li>
<li>Download <a href="https://play.google.com/store/apps/details?id=es.situm.maps">SitumMaps</a>. With this application, you will be able to configure and test Situm&rsquo;s indoor positioning system in your buildings.</li>
</ol>

<p>Perfect! Now you are ready to develop your first indoor positioning application.</p>

  </div>

  <div id="guide__configure-sdk" class="guide__section">
    <h3>Step 1: Configure our SDK in your Android project</h3>

<p>First of all, you must configure Situm SDK in your Android project. This has been already done for you in the sample application, but nonetheless we will walk you to the process.</p>

<ul>
<li>Add the next line to the project <em>build.gradle</em> in the <em>repositories</em> section of <em>allprojects</em>:</li>
</ul>
<pre class="highlight groovy"><code><span class="n">maven</span> <span class="o">{</span> <span class="n">url</span> <span class="s2">"https://repo.situm.es/artifactory/libs-release-local"</span> <span class="o">}</span>
</code></pre>
<ul>
<li>Then import the Situm SDK library into the section <em>dependencies</em> of the app <em>build.gradle</em>:</li>
</ul>
<pre class="highlight groovy"><code><span class="n">compile</span> <span class="s1">'es.situm:situm-sdk:1.66e@aar'</span>
</code></pre>
<ul>
<li>Add Situm SDK dependencies into the same section of the <em>build.gradle</em> file.</li>
</ul>
<pre class="highlight groovy"><code><span class="n">compile</span> <span class="s1">'org.altbeacon:android-beacon-library:2.9.1'</span>
<span class="n">compile</span> <span class="s1">'es.usc.citius.hipster:hipster-core:1.0.1'</span>
<span class="n">compile</span> <span class="s1">'com.loopj.android:android-async-http:1.4.9'</span>
</code></pre>
<p>We recommend you to re-synchronize the project at this point.</p>

<ul>
<li> Import the SitumSDK service by adding the following line within the section <em><application></application></em> of the AndroidManifest file (<em>main/AndroidManifest.xml</em>):</li>
</ul>
<pre class="highlight xml"><code><span class="nt">&lt;service</span> <span class="na">android:name=</span><span class="s">"es.situm.sdk.v1.SitumService"</span> <span class="na">android:exported=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
</code></pre>
<ul>
<li>Grant the app access permissions to sensors and other services to guarantee the correct behaviour of Situm SDK. This also requires adding the following access permissions to <em>AndroidManifest</em>:</li>
</ul>
<pre class="highlight xml"><code><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.INTERNET"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.ACCESS_WIFI_STATE"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.CHANGE_WIFI_STATE"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.BLUETOOTH_ADMIN"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.BLUETOOTH"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.WAKE_LOCK"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.ACCESS_NETWORK_STATE"</span> <span class="nt">/&gt;</span>
</code></pre>
  </div>

  <div id="guide__instance-situmData" class="guide__section">
    <h3>Step 2: Get an instance of SitumDataManager</h3>

<p>Now that you have correctly configured your Android project, you can start writting your application&rsquo;s code. In this sample project, all this code has been included in the file <a href="https://github.com/situmtech/situm-android-getting-started/blob/master/app/src/main/java/es/situm/gettingstarted/SitumMainActivity.java">SitumMainActivity.java</a></p>

<p>First of all, you must configure your SitumDataManager class, which will give you access to your building&rsquo;s data (list of buildings, floorplans, points of interest, etc.). There are two ways of doing this:</p>

<h5>Option 1: Using your email address and APIKEY.</h5>

<p>This is the recommended option and the one that we have implemented in this project. To do so, include the following code in your application (e.g. in your main activity):</p>
<pre class="highlight java"><code><span class="n">SitumDataManager</span> <span class="n">dataManager</span> <span class="o">=</span> <span class="n">SitumLogin</span><span class="o">.</span><span class="na">login</span><span class="o">(</span><span class="s">"test@situm.es"</span><span class="o">,</span><span class="s">"api_key"</span><span class="o">);</span>
</code></pre>
<p>Remember to add the following dependencies in the same file:</p>
<pre class="highlight java"><code><span class="kn">import</span> <span class="nn">es.situm.sdk.v1.SitumDataManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">es.situm.sdk.v1.SitumLogin</span><span class="o">;</span>
</code></pre>
<h5>Option 2: Using your email address and password.</h5>

<p>To do so, we should pass the email and password to the <em>SitumLogin</em> object, and implement a <em>SitumLoginResponseHandler</em> callback to receive a valid instance of <em>SitumDataManager</em>.</p>
<pre class="highlight java"><code><span class="n">SitumLogin</span><span class="o">.</span><span class="na">login</span><span class="o">(</span><span class="s">"user_email"</span><span class="o">,</span><span class="s">"password"</span><span class="o">,</span> <span class="k">new</span> <span class="n">SitumLoginResponseHandler</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onLogin</span><span class="o">(</span><span class="n">SitumDataManager</span> <span class="n">situmDataManager</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onWrongLogin</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onConnectionError</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>
<span class="o">});</span>
</code></pre>
<p>This mechanism has not been implemented in the sample app. For more information, please refer to the javadoc.</p>

  </div>

  <div id="guide__download-your-buildings" class="guide__section">
    <h3>Step 3: Download your buildings</h3>

<p>At this point, we should be able to retrieve the list of buildings associated with our user&rsquo;s account. To do so, include the following code snippet, that will also receive an error callback in case the retrieve operation fails.</p>
<pre class="highlight java"><code><span class="n">dataManager</span><span class="o">.</span><span class="na">fetchBuildings</span><span class="o">(</span><span class="k">new</span> <span class="n">SitumResponseHandler</span><span class="o">&lt;</span><span class="n">SitumBuilding</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onListReceived</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">SitumBuilding</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// received buildings</span>
        <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">SitumBuilding</span><span class="o">&gt;</span> <span class="n">buildings</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">list</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">SitumBuilding</span> <span class="n">building</span> <span class="o">:</span> <span class="n">buildings</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"Received building"</span> <span class="o">+</span> <span class="n">building</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onErrorReceived</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="n">Header</span><span class="o">[]</span> <span class="n">h</span><span class="o">,</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span><span class="o">,</span> <span class="n">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// manage errors</span>
        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"Error receiving buildings"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">});</span>

</code></pre>
<p>Again, remember to add the corresponding dependencies:</p>
<pre class="highlight java"><code><span class="kn">import</span> <span class="nn">android.preference.PreferenceActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.Header</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">es.situm.sdk.v1.SitumBuilding</span><span class="o">;</span>
</code></pre>
  </div>

  <div id="guide__download-building-data" class="guide__section">
    <h3>Step 4: Download building data</h3>

<p>Once we have the buildings, it is straightforward to get their information. For instance, in order to obtain all the floors of a building, we just have to select the required building:</p>
<pre class="highlight java"><code><span class="n">selectedBuilding</span> <span class="o">=</span> <span class="n">buildings</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">7</span><span class="o">);</span>
</code></pre>
<p>and call <em>SitumDataManager</em> to fetch its levels:</p>
<pre class="highlight java"><code><span class="n">dataManager</span><span class="o">.</span><span class="na">fetchLevelsForBuilding</span><span class="o">(</span><span class="n">selectedBuilding</span><span class="o">,</span> <span class="k">new</span> <span class="n">SitumResponseHandler</span><span class="o">&lt;</span><span class="n">SitumLevel</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onListReceived</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">SitumLevel</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// received levels for  selectedBuilding</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">SitumLevel</span><span class="o">&gt;</span> <span class="n">levels</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">list</span><span class="o">);</span>
        <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"Received %s levels for %s"</span><span class="o">,</span> <span class="n">levels</span><span class="o">.</span><span class="na">size</span><span class="o">(),</span>
        <span class="n">selectedBuilding</span><span class="o">.</span><span class="na">getName</span><span class="o">()));</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onErrorReceived</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="n">Header</span><span class="o">[]</span> <span class="n">h</span><span class="o">,</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span><span class="o">,</span> <span class="n">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
          <span class="c1">// manage errors</span>
    <span class="o">}</span>
<span class="o">});</span>
</code></pre>
<p>NOTE: This code has to be included into the function <em>onListReceived()</em> of the call to the fetchBuildings method (see Step 3).</p>

<p>In addition, we have to add the following import:</p>
<pre class="highlight java"><code><span class="kn">import</span> <span class="nn">es.situm.sdk.v1.SitumLevel</span><span class="o">;</span>
</code></pre>
<p>As we can see, all the petitions are very similar, and remain being so for the other resources (events, points of interest, floorplans, etc.). In  <a href="https://github.com/situmtech/situm-android-getting-started/blob/master/app/src/main/java/es/situm/gettingstarted/SitumMainActivity.java">SitumMainActivity.java</a> we also show how to dowload the image floorplan of a floor.</p>

  </div>

  <div id="guide__activate-the-positioning" class="guide__section">
    <h3><a name="positioning"></a>Step 5: Activate the positioning</h3>

<p>The last step is to initiate the indoor positioning on a certain building. This will allow the app to retrieve the location of the smartphone within this building. As in the previous case,  this code has to be included into the function <em>onListReceived()</em> of the call to the <em>fetchBuildings</em> method.</p>

<p>First of all, create an instance of SitumIPSManager:</p>
<pre class="highlight java"><code><span class="n">SitumIPSManager</span> <span class="n">ipsManager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SitumIPSManager</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">());</span>
</code></pre>
<p>Then, pass a callback that will inform us of possible errors that may happen.</p>
<pre class="highlight java"><code><span class="n">ipsManager</span><span class="o">.</span><span class="na">setSensorErrorListener</span><span class="o">(</span><span class="k">new</span> <span class="n">SitumSensorErrorListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onError</span><span class="o">(</span><span class="n">SitumError</span> <span class="n">situmError</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//Manage error</span>
    <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="n">situmError</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
    <span class="n">txtLocation</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">situmError</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">});</span>

</code></pre>
<p>Initiate the positioning on a specific building:</p>
<pre class="highlight java"><code><span class="n">ipsManager</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="n">selectedBuilding</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
<span class="n">ipsManager</span><span class="o">.</span><span class="na">setPoseReceiver</span><span class="o">(</span><span class="k">new</span> <span class="n">SitumPoseReceiver</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onPoseReceived</span><span class="o">(</span><span class="n">SitumLocation</span> <span class="n">situmLocation</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"x %s y %s"</span><span class="o">,</span> <span class="n">situmLocation</span><span class="o">.</span><span class="na">x</span><span class="o">,</span> <span class="n">situmLocation</span><span class="o">.</span><span class="na">y</span><span class="o">));</span>
            <span class="n">txtLocation</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"x %s y %s"</span><span class="o">,</span> <span class="n">situmLocation</span><span class="o">.</span><span class="na">x</span><span class="o">,</span>  <span class="n">situmLocation</span><span class="o">.</span><span class="na">y</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">});</span>

</code></pre>
<p>Again, remember to add the required imports:</p>
<pre class="highlight java"><code><span class="kn">import</span> <span class="nn">es.situm.sdk.v1.SitumError</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">es.situm.sdk.v1.SitumIPSManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">es.situm.sdk.v1.SitumSensorErrorListener</span><span class="o">;</span>
</code></pre>
  </div>

  <div id="guide__android-60" class="guide__section">
    <h3>Android 6.0 compilation</h3>

<p>Due to changes in Android 6.0, the library support to the Apache HTTP client, used by Situm SDK, has been deleted. To allow our SDK to use Apache HTTP API and maintain the compatibility with Android 6.0, we have to declare the following dependences into the file <em>build.gradle</em> (Module: App):</p>
<pre class="highlight groovy"><code><span class="n">useLibrary</span>  <span class="s1">'org.apache.http.legacy'</span>
</code></pre>
<p>In addition, we have to add the dependencies to a target of <em>Android 23</em>:</p>
<pre class="highlight groovy"><code><span class="n">compile</span> <span class="s1">'com.android.support:appcompat-v7:23.1.1'</span>
</code></pre>
<p>We also recommend you to ask the user for permision in order to have access to its location, because Android 6.0 does not allow WiFi scanning without this permission:</p>
<pre class="highlight java"><code><span class="kt">int</span> <span class="n">permissionCheck</span> <span class="o">=</span> <span class="n">ContextCompat</span><span class="o">.</span><span class="na">checkSelfPermission</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">ACCESS_FINE_LOCATION</span><span class="o">);</span>

<span class="k">if</span> <span class="o">(</span><span class="n">permissionCheck</span> <span class="o">==</span> <span class="n">PackageManager</span><span class="o">.</span><span class="na">PERMISSION_GRANTED</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">startLocation</span><span class="o">();</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">Build</span><span class="o">.</span><span class="na">VERSION</span><span class="o">.</span><span class="na">SDK_INT</span> <span class="o">&gt;=</span> <span class="n">Build</span><span class="o">.</span><span class="na">VERSION_CODES</span><span class="o">.</span><span class="na">M</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">requestPermissions</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">[]{</span><span class="n">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">ACCESS_FINE_LOCATION</span><span class="o">,</span>
            <span class="n">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">ACCESS_COARSE_LOCATION</span><span class="o">},</span> <span class="n">LOCATION_PERMISSION_RESULT</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p>Then, you can check the result of this action by overwriting the method:</p>
<pre class="highlight java"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onRequestPermissionsResult</span><span class="o">(</span><span class="kt">int</span> <span class="n">requestCode</span><span class="o">,</span> <span class="n">String</span><span class="o">[]</span> <span class="n">permissions</span><span class="o">,</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">grantResults</span><span class="o">);</span>
</code></pre>
  </div>

</div>

                      <input type="checkbox" id="open-navbar" class="check-navbar">
<div class="drawer">
  <div class="navbar__nav-logo">
<a href="../../">      <img src="../../images/common/situm-logo.png" class="nav-logo__image" alt="Situm logo" />
</a>  </div>
  <div class="clear"></div>

  <div class="navbar__nav-links">
      <a href="../../" class="navbar-link ">Home</a>
      <a href="./" class="navbar-link ">Android SDK</a>
      <a href="../ios/" class="navbar-link ">IOS SDK</a>
      <a href="../rest/" class="navbar-link ">Situm REST API</a>
      <a href="../terminology/" class="navbar-link ">Terminology</a>
      <a href="../support/" class="navbar-link ">Support</a>
  </div>

  <div class="navbar__footer">
    <div class="social-icons">
<a href="https://www.facebook.com/situm.es" target="_blank">          <img src="../../images/social/facebook-icon.svg" class="social-icons__icon" alt="Facebook icon" />
</a><a href="https://www.linkedin.com/company/situmtechnologies" target="_blank">          <img src="../../images/social/linkedin-icon.svg" class="social-icons__icon" alt="Linkedin icon" />
</a><a href="https://www.youtube.com/channel/UCD6lPAxYK20WStHKnRw3I2A" target="_blank">          <img src="../../images/social/youtube-icon.svg" class="social-icons__icon" alt="Youtube icon" />
</a><a href="https://plus.google.com/+SitumEsEn" target="_blank">          <img src="../../images/social/google-plus-icon.svg" class="social-icons__icon" alt="Google plus icon" />
</a><a href="https://twitter.com/situm_es" target="_blank">          <img src="../../images/social/twitter-icon.svg" class="social-icons__icon" alt="Twitter icon" />
</a>    </div>
    <p class="copyright">COPYRIGHT &copy; SITUM TECHNOLOGIES 2014 - 2017</p>
  </div>
</div>

<div class="obfuscator">
<label for="open-navbar" class="obfuscator__navbar-label"></label>
</div>

                    </div>
                    <div class="clear"></div>
                    <nav class="footer-wrapper">
  <div class="row footer-wrapper__content wrapper-4">
      <div class="footer-wrapper__content--part option-0">
        <div class="content--part__title">
          SDKs & APIs
        </div>
        <div class="content--part__list">
            <li class="content--part__list-item">
<a href="./">                Android SDK
</a>            </li>
            <li class="content--part__list-item">
<a href="../ios/">                iOS SDK
</a>            </li>
            <li class="content--part__list-item">
<a href="../rest/">                Situm Rest API
</a>            </li>
        </div>
      </div>
      <div class="footer-wrapper__content--part option-1">
        <div class="content--part__title">
          Resources
        </div>
        <div class="content--part__list">
            <li class="content--part__list-item">
<a href="http://dashboard.situm.es/">                Situm Dashboard
</a>            </li>
            <li class="content--part__list-item">
<a href="../terminology/">                Terminology
</a>            </li>
        </div>
      </div>
      <div class="footer-wrapper__content--part option-2">
        <div class="content--part__title">
          Support
        </div>
        <div class="content--part__list">
            <li class="content--part__list-item">
<a href="../support/faq.html">                FAQ
</a>            </li>
            <li class="content--part__list-item">
<a href="mailto:situm@situm.es">                Contact us
</a>            </li>
        </div>
      </div>
      <div class="footer-wrapper__content--part option-3">
        <div class="content--part__title">
          About Situm
        </div>
        <div class="content--part__list">
            <li class="content--part__list-item">
<a href="https://situm.es/">                Situm Website
</a>            </li>
            <li class="content--part__list-item">
<a href="https://play.google.com/store/apps/details?id=es.situm.maps">                Situm Maps for Android
</a>            </li>
        </div>
      </div>
    <div class="clear"></div>
    <div class="social-footer-icons">
<a href="https://www.facebook.com/situm.es" target="_blank" class="social-icon__link">          <div class="social-icons__icon">
  <svg
     xmlns:dc="http://purl.org/dc/elements/1.1/"
     xmlns:cc="http://creativecommons.org/ns#"
     xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
     xmlns:svg="http://www.w3.org/2000/svg"
     xmlns="http://www.w3.org/2000/svg"
     xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
     xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
     version="1.1"
     id="Capa_1"
     x="0px"
     y="0px"
     viewBox="0 0 155.139 155.139"
     xml:space="preserve"
     width="512px"
     height="512px"
     inkscape:version="0.91 r13725"
     sodipodi:docname="facebook-icon.svg"
     style="enable-background:new 0 0 155.139 155.139;"><metadata
       id="metadata40"><rdf:RDF><cc:Work
           rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
             rdf:resource="http://purl.org/dc/dcmitype/StillImage" /></cc:Work></rdf:RDF></metadata><defs
       id="defs38" /><sodipodi:namedview
       pagecolor="#ffffff"
       bordercolor="#666666"
       borderopacity="1"
       objecttolerance="10"
       gridtolerance="10"
       guidetolerance="10"
       inkscape:pageopacity="0"
       inkscape:pageshadow="2"
       inkscape:window-width="1855"
       inkscape:window-height="1056"
       id="namedview36"
       showgrid="false"
       inkscape:zoom="0.4609375"
       inkscape:cx="-151.27032"
       inkscape:cy="-28.203442"
       inkscape:window-x="65"
       inkscape:window-y="24"
       inkscape:window-maximized="1"
       inkscape:current-layer="Capa_1" /><g
       id="g3"><path
         id="f_1_"
         d="M89.584,155.139V84.378h23.742l3.562-27.585H89.584V39.184   c0-7.984,2.208-13.425,13.67-13.425l14.595-0.006V1.08C115.325,0.752,106.661,0,96.577,0C75.52,0,61.104,12.853,61.104,36.452   v20.341H37.29v27.585h23.814v70.761H89.584z"
         fill="#FFFFFF" /></g><g
       id="g6" /><g
       id="g8" /><g
       id="g10" /><g
       id="g12" /><g
       id="g14" /><g
       id="g16" /><g
       id="g18" /><g
       id="g20" /><g
       id="g22" /><g
       id="g24" /><g
       id="g26" /><g
       id="g28" /><g
       id="g30" /><g
       id="g32" /><g
       id="g34" /></svg>
</div>

</a><a href="https://www.linkedin.com/company/situmtechnologies" target="_blank" class="social-icon__link">          <div class="social-icons__icon">
	<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="512px" height="512px" viewBox="0 0 438.536 438.535" style="enable-background:new 0 0 438.536 438.535;" xml:space="preserve">
	<g>
		<g>
			<rect x="5.424" y="145.895" width="94.216" height="282.932" fill="#FFFFFF"/>
			<path d="M408.842,171.739c-19.791-21.604-45.967-32.408-78.512-32.408c-11.991,0-22.891,1.475-32.695,4.427    c-9.801,2.95-18.079,7.089-24.838,12.419c-6.755,5.33-12.135,10.278-16.129,14.844c-3.798,4.337-7.512,9.389-11.136,15.104    v-40.232h-93.935l0.288,13.706c0.193,9.139,0.288,37.307,0.288,84.508c0,47.205-0.19,108.777-0.572,184.722h93.931V270.942    c0-9.705,1.041-17.412,3.139-23.127c4-9.712,10.037-17.843,18.131-24.407c8.093-6.572,18.13-9.855,30.125-9.855    c16.364,0,28.407,5.662,36.117,16.987c7.707,11.324,11.561,26.98,11.561,46.966V428.82h93.931V266.664    C438.529,224.976,428.639,193.336,408.842,171.739z" fill="#FFFFFF"/>
			<path d="M53.103,9.708c-15.796,0-28.595,4.619-38.4,13.848C4.899,32.787,0,44.441,0,58.529c0,13.891,4.758,25.505,14.275,34.829    c9.514,9.325,22.078,13.99,37.685,13.99h0.571c15.99,0,28.887-4.661,38.688-13.99c9.801-9.324,14.606-20.934,14.417-34.829    c-0.19-14.087-5.047-25.742-14.561-34.973C81.562,14.323,68.9,9.708,53.103,9.708z" fill="#FFFFFF"/>
		</g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	</svg>
</div>

</a><a href="https://www.youtube.com/channel/UCD6lPAxYK20WStHKnRw3I2A" target="_blank" class="social-icon__link">          <div class="social-icons__icon">
  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="512px" version="1.1" height="512px" viewBox="0 0 64 64" enable-background="new 0 0 64 64">
    <g>
      <g>
        <g fill="#1D1D1B">
          <path d="m37.635,41.44c-0.542,0-1.088,0.257-1.635,0.79v10.999c0.547,0.544 1.093,0.806 1.635,0.806 0.941,0 1.423-0.806 1.423-2.434v-7.698c0.001-1.632-0.482-2.463-1.423-2.463z" fill="#FFFFFF"/>
          <path d="m49.601,41.44c-1.093,0-1.642,0.831-1.642,2.502v1.671h3.274v-1.671c0.001-1.671-0.546-2.502-1.632-2.502z" fill="#FFFFFF"/>
          <g>
            <path d="m56.396,29.049c-2.055-2.139-4.357-2.148-5.414-2.271-7.556-0.54-18.889-0.54-18.889-0.54h-0.025c0,0-11.333,0-18.896,0.54-1.054,0.123-3.352,0.133-5.409,2.271-1.618,1.632-2.147,5.327-2.147,5.327s-0.536,4.343-0.536,8.685v4.073c0,4.341 0.536,8.686 0.536,8.686s0.529,3.695 2.147,5.321c2.057,2.139 4.753,2.072 5.952,2.295 4.324,0.413 18.365,0.538 18.365,0.538s11.347-0.016 18.903-0.562c1.057-0.121 3.359-0.133 5.414-2.271 1.619-1.626 2.147-5.321 2.147-5.321s0.536-4.345 0.536-8.686v-4.073c0-4.342-0.536-8.685-0.536-8.685s-0.529-3.695-2.148-5.327zm-39.417,27.706h-3.642v-20.802h-3.851v-3.406h11.414v3.406h-3.92v20.802zm12.912,0h-3.278v-1.969c-1.299,1.489-2.54,2.221-3.742,2.221-1.054,0-1.781-0.432-2.112-1.346-0.178-0.546-0.286-1.409-0.286-2.683v-14.261h3.275v13.28c0,0.765 0,1.164 0.024,1.27 0.083,0.507 0.336,0.769 0.771,0.769 0.658,0 1.341-0.507 2.069-1.533v-13.786h3.278v18.038zm12.44-5.409c0,1.663-0.11,2.866-0.331,3.631-0.438,1.344-1.313,2.03-2.613,2.03-1.168,0-2.294-0.647-3.387-1.999v1.747h-3.277v-24.208h3.277v7.905c1.056-1.299 2.179-1.956 3.387-1.956 1.299,0 2.174,0.688 2.613,2.036 0.221,0.729 0.331,1.918 0.331,3.628v7.186zm12.179-3.016h-6.55v3.199c0,1.671 0.549,2.506 1.673,2.506 0.806,0 1.275-0.44 1.463-1.311 0.029-0.178 0.073-0.908 0.073-2.219h3.341v0.479c0,1.051-0.043,1.776-0.071,2.106-0.108,0.723-0.368,1.378-0.766,1.955-0.906,1.312-2.25,1.96-3.963,1.96-1.711,0-3.014-0.618-3.96-1.853-0.696-0.902-1.051-2.326-1.051-4.241v-6.319c0-1.927 0.318-3.333 1.012-4.249 0.946-1.234 2.249-1.849 3.922-1.849 1.643,0 2.947,0.614 3.863,1.849 0.685,0.916 1.015,2.322 1.015,4.249v3.738z" fill="#FFFFFF"/>
            <path d="m23.436,24.434v-9.908l4.412-14.552h-3.71l-2.503,9.605-2.605-9.605h-3.863c0.777,2.268 1.581,4.544 2.356,6.816 1.174,3.411 1.91,5.982 2.244,7.735v9.908h3.669z" fill="#FFFFFF"/>
            <path d="m32.047,24.685c1.656,0 2.942-0.624 3.858-1.864 0.692-0.91 1.029-2.346 1.029-4.287v-6.387c0-1.945-0.337-3.367-1.029-4.289-0.917-1.25-2.202-1.87-3.858-1.87-1.654,0-2.943,0.62-3.854,1.87-0.707,0.922-1.034,2.344-1.034,4.289v6.387c0,1.941 0.327,3.377 1.034,4.287 0.911,1.24 2.2,1.864 3.854,1.864zm-1.581-13.199c0-1.686 0.514-2.529 1.581-2.529 1.062,0 1.573,0.844 1.573,2.529v7.669c0,1.687-0.511,2.53-1.573,2.53-1.067,0-1.581-0.844-1.581-2.53v-7.669z" fill="#FFFFFF"/>
            <path d="m48.988,24.434v-18.231h-3.308v13.935c-0.733,1.034-1.427,1.548-2.088,1.548-0.445,0-0.708-0.265-0.777-0.773-0.042-0.109-0.042-0.51-0.042-1.285v-13.425h-3.299v14.418c0,1.289 0.108,2.161 0.293,2.711 0.332,0.92 1.068,1.353 2.133,1.353 1.204,0 2.46-0.732 3.781-2.24v1.989h3.307z" fill="#FFFFFF"/>
          </g>
        </g>
      </g>
    </g>
  </svg>
</div>

</a><a href="https://plus.google.com/+SitumEsEn" target="_blank" class="social-icon__link">          <div class="social-icons__icon">
  <svg
     xmlns:dc="http://purl.org/dc/elements/1.1/"
     xmlns:cc="http://creativecommons.org/ns#"
     xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
     xmlns:svg="http://www.w3.org/2000/svg"
     xmlns="http://www.w3.org/2000/svg"
     xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
     xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
     version="1.1"
     id="Layer_1"
     x="0px"
     y="0px"
     viewBox="0 0 458.246 458.246"
     style="enable-background:new 0 0 458.246 458.246;"
     xml:space="preserve"
     inkscape:version="0.91 r13725"
     sodipodi:docname="google-plus.svg"><metadata
       id="metadata43"><rdf:RDF><cc:Work
           rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
             rdf:resource="http://purl.org/dc/dcmitype/StillImage" /></cc:Work></rdf:RDF></metadata><defs
       id="defs41" /><sodipodi:namedview
       pagecolor="#ffffff"
       bordercolor="#666666"
       borderopacity="1"
       objecttolerance="10"
       gridtolerance="10"
       guidetolerance="10"
       inkscape:pageopacity="0"
       inkscape:pageshadow="2"
       inkscape:window-width="1855"
       inkscape:window-height="1056"
       id="namedview39"
       showgrid="false"
       inkscape:zoom="0.51500722"
       inkscape:cx="-25.242365"
       inkscape:cy="229.123"
       inkscape:window-x="65"
       inkscape:window-y="24"
       inkscape:window-maximized="1"
       inkscape:current-layer="Layer_1" /><g
       id="g3"
       style="fill:#ffffff;fill-opacity:1"><path
         style="fill:#ffffff;fill-opacity:1"
         d="M160.777,259.368h71.594c-12.567,35.53-46.603,61.004-86.45,60.71   c-48.349-0.357-88.327-39.035-90.204-87.349c-2.012-51.789,39.537-94.563,90.887-94.563c23.479,0,44.905,8.946,61.058,23.605   c3.826,3.473,9.65,3.495,13.413-0.047l26.296-24.749c4.112-3.871,4.127-10.408,0.027-14.292   c-25.617-24.269-59.981-39.396-97.876-40.136C68.696,80.969,0.567,147.238,0.004,228.078   c-0.568,81.447,65.285,147.649,146.6,147.649c78.199,0,142.081-61.229,146.36-138.358c0.114-0.967,0.189-33.648,0.189-33.648   H160.777c-5.426,0-9.824,4.398-9.824,9.824v35.999C150.953,254.97,155.352,259.368,160.777,259.368z"
         id="path5" /><path
         style="fill:#ffffff;fill-opacity:1"
         d="M414.464,206.99v-35.173c0-4.755-3.854-8.609-8.609-8.609h-29.604c-4.755,0-8.609,3.854-8.609,8.609   v35.173h-35.173c-4.755,0-8.609,3.854-8.609,8.609v29.604c0,4.755,3.854,8.609,8.609,8.609h35.173v35.173   c0,4.755,3.854,8.609,8.609,8.609h29.604c4.755,0,8.609-3.854,8.609-8.609v-35.173h35.173c4.755,0,8.609-3.854,8.609-8.609v-29.604   c0-4.755-3.854-8.609-8.609-8.609L414.464,206.99L414.464,206.99z"
         id="path7" /></g><g
       id="g9" /><g
       id="g11" /><g
       id="g13" /><g
       id="g15" /><g
       id="g17" /><g
       id="g19" /><g
       id="g21" /><g
       id="g23" /><g
       id="g25" /><g
       id="g27" /><g
       id="g29" /><g
       id="g31" /><g
       id="g33" /><g
       id="g35" /><g
       id="g37" /></svg>
</div>

</a><a href="https://twitter.com/situm_es" target="_blank" class="social-icon__link">          <div class="social-icons__icon">
	<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="512px" height="512px" viewBox="0 0 512.002 512.002" style="enable-background:new 0 0 512.002 512.002;" xml:space="preserve">
	<g>
		<path d="M512.002,97.211c-18.84,8.354-39.082,14.001-60.33,16.54c21.686-13,38.342-33.585,46.186-58.115   c-20.299,12.039-42.777,20.78-66.705,25.49c-19.16-20.415-46.461-33.17-76.674-33.17c-58.011,0-105.042,47.029-105.042,105.039   c0,8.233,0.929,16.25,2.72,23.939c-87.3-4.382-164.701-46.2-216.509-109.753c-9.042,15.514-14.223,33.558-14.223,52.809   c0,36.444,18.544,68.596,46.73,87.433c-17.219-0.546-33.416-5.271-47.577-13.139c-0.01,0.438-0.01,0.878-0.01,1.321   c0,50.894,36.209,93.348,84.261,103c-8.813,2.399-18.094,3.687-27.674,3.687c-6.769,0-13.349-0.66-19.764-1.888   c13.368,41.73,52.16,72.104,98.126,72.949c-35.95,28.176-81.243,44.967-130.458,44.967c-8.479,0-16.84-0.496-25.058-1.471   c46.486,29.807,101.701,47.197,161.021,47.197c193.211,0,298.868-160.062,298.868-298.872c0-4.554-0.104-9.084-0.305-13.59   C480.111,136.775,497.92,118.275,512.002,97.211z" fill="#FFFFFF"/>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	</svg>
</div>

</a>      <div class="clear"></div>
    </div>
    <div class="clear"></div>
    <p class="copyright">COPYRIGHT &copy; SITUM TECHNOLOGIES 2014 - 2017</p>
  </div>

</nav>

                    <div id="cookies-container" class="cookie-policy-container">
  <div class="cookie-policy-container__message">
    <span class="cookie-policy-container__message--text">
      We use cookies from third parties to get statistical data from your use of this website. If you continue without changing your settings, weâ€™ll assume that you agree to receive all cookies on this website. However, you can change your cookie settings and get more information at any time
    </span>

<a href="../legal/" class="cookie-policy-container__more-information">      <span class="more-information__text">
        here.
      </span>
</a>
    <a href="#" onclick="Cookies.controlCookies(event)" class="cookie-policy-container__link-agree">
      <span class="link-agree__text">
        Accept
      </span>
    </a>

  </div>
</div>

<script type="text/javascript">
  Cookies.init();
</script>

                </div>
            </div>
          </div>
        </div>
    </div>
  </body>
</html>
